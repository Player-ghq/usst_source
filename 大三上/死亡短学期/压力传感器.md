# 压力传感器

### 概念

称重后   显示数码管上



### 要求

1. 压力传感器    输出电压  

​			模数转换

2. 数字转换到数码管上

3. 无线部分  esp

   串口通信
   
   

### 要交的东西

报告 + proteus + 程序



### 程序设计

1. 流程图
2. 图文并述



### wifi 模块

的资料

esp32  tcp 文件的资料







### 中断程序细节



看了一些网友编写的程序，发现有如下几条容易出错：

1. 有人在发送数据之前，先关闭了串口中断！等待发送完毕后，再打开串口中断。
   这样，在发送数据的等待期间内，如果收到了数据，将不能进入中断函数，也就不会保存的这个新收到的数据。
   这种处理方法，就会遗漏收到的数据。

2. 有人在发送数据之前，并没有关闭串口中断，当 
   TI = 1 时，是可以进入中断程序的。
   但是，却在中断函数中，将 TI 清零!
   这样，在主函数中的while(TI 
   ==0);，将永远等不到发送结束的标志。

3. 还有人在中断程序中，并没有区分中断的来源，反而让发送引起的中断，执行了接收中断的程序。

   对此，做而论道发表自己常用的方法：
   	接收数据时，使用“中断方式”，清除 
   RI 后，用一个变量通知主函数，收到新数据。
   	发送数据时，也用“中断方式”，清除 TI 
   后，用另一个变量通知主函数，数据发送完毕。
   	这样一来，收、发两者基本一致，编写程序也很规范、易懂。
   更重要的是，主函数中，不用在那儿死等发送完毕，可以有更多的时间查看其它的标志。

